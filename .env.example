# CENTRALIZED ENVIRONMENT CONFIGURATION
# Copy this file to .env in the root directory
#
# USAGE IN DOCKER COMPOSE:
# 1. Point env_file to this file:
#    env_file:
#      - ../.env
# 2. Map variables in 'environment' section:
#    environment:
#      - PORT=${AUTH_PORT}
#      - DATABASE_URL=${AUTH_DATABASE_URL}

# =============================================================================
# SHARED INFRASTRUCTURE (Postgres, SMTP)
# =============================================================================

# Shared Database Connection Details
SHARED_DB_HOST=shared-postgres
SHARED_DB_PORT=5432

# Shared SMTP Configuration (Gmail)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password-without-spaces
SMTP_FROM=your-email@gmail.com

# Shared Auth/CORS
# Domain for cookies (e.g. .korczewski.de)
COOKIE_DOMAIN=localhost
AUTH_SERVICE_URL=http://localhost:5500


# =============================================================================
# AUTH SERVICE
# =============================================================================
AUTH_PORT=5500
AUTH_NODE_ENV=development
AUTH_DATABASE_URL=postgresql://auth_user:auth_password@shared-postgres:5432/auth_db
AUTH_DB_USER=auth_user
AUTH_DB_PASSWORD=auth_password

# JWT Secrets (Minimum 32 chars in production)
AUTH_JWT_SECRET=your-super-secret-jwt-key-change-in-production
AUTH_JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-in-production
AUTH_ACCESS_TOKEN_EXPIRY=15m
AUTH_REFRESH_TOKEN_EXPIRY=7d

# Session
AUTH_SESSION_SECRET=your-super-secret-session-key-change-in-production
AUTH_SESSION_MAX_AGE=2592000000

# Google OAuth
AUTH_GOOGLE_CLIENT_ID=your-google-client-id
AUTH_GOOGLE_CLIENT_SECRET=your-google-client-secret
AUTH_GOOGLE_REDIRECT_URI=http://localhost:5500/api/oauth/google/callback

# OAuth 2.0 (for other clients)
AUTH_OAUTH_CODE_EXPIRY=600
AUTH_OAUTH_ALLOWED_REDIRECT_URIS=https://l2p.korczewski.de/auth/callback,http://localhost:3000/auth/callback

# Allowed Origins
AUTH_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3002,http://localhost:3004,http://localhost:5000,http://localhost:5100,http://localhost:5500,https://l2p.korczewski.de
AUTH_APP_URL=http://localhost:5500

# Security
AUTH_BCRYPT_ROUNDS=12
AUTH_MAX_LOGIN_ATTEMPTS=5
AUTH_ACCOUNT_LOCKOUT_DURATION=900000


# =============================================================================
# PAYMENT SERVICE
# =============================================================================
# Note: Payment service also uses NextAuth
PAYMENT_DATABASE_URL="postgresql://payment_user:payment_password@shared-postgres:5432/payment_db?schema=public"
PAYMENT_DB_USER=payment_user
PAYMENT_DB_PASSWORD=payment_password

PAYMENT_NEXTAUTH_SECRET="your_nextauth_secret_here"
PAYMENT_NEXTAUTH_URL="http://localhost:3004"

# Google OAuth (NextAuth)
PAYMENT_AUTH_GOOGLE_ID="your-google-client-id"
PAYMENT_AUTH_GOOGLE_SECRET="your-google-client-secret"

# Stripe
STRIPE_SECRET_KEY="sk_test_..."
STRIPE_WEBHOOK_SECRET="whsec_..."
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_..."

# Client Auth
PAYMENT_AUTH_SECRET="your_auth_secret_here"
PAYMENT_AUTH_TRUST_HOST=true


# =============================================================================
# L2P (LEARN TO PLAY) SERVICE
# =============================================================================
L2P_NODE_ENV=development
L2P_PORT=3001
L2P_FRONTEND_PORT=3000
L2P_FRONTEND_URL=http://localhost:3000

# Database
L2P_DATABASE_URL=postgresql://l2p_user:l2p_password@shared-postgres:5432/l2p_db
L2P_DB_NAME=l2p_db
L2P_DB_USER=l2p_user
L2P_DB_PASSWORD=l2p_password

# JWT (Specific to L2P)
L2P_JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters
L2P_JWT_REFRESH_SECRET=your-super-secret-refresh-key-minimum-32-characters

# Google AI
GOOGLE_AI_API_KEY=your-gemini-api-key

# OAuth Client (L2P as client of Auth Service)
L2P_OAUTH_CLIENT_ID=l2p_client_prod
L2P_OAUTH_CLIENT_SECRET=change-me
L2P_OAUTH_REDIRECT_URI=http://localhost:3000/auth/callback

# CORS
L2P_CORS_ORIGINS=http://localhost:3000,http://localhost:3002,https://*.korczewski.de

# Security
L2P_FORCE_HTTPS=false
L2P_TRUSTED_PROXIES=127.0.0.1


# =============================================================================
# VIDEO VAULT SERVICE
# =============================================================================
VIDEO_PORT=5100
VIDEO_NODE_ENV=development
VIDEO_DATABASE_URL=postgresql://videovault_user:videovault_password@shared-postgres:5432/videovault_db

VIDEO_SESSION_SECRET=your-session-secret-here
VIDEO_ADMIN_USER=admin
VIDEO_ADMIN_PASS=your-admin-password

VIDEO_MEDIA_ROOT=/path/to/your/media
# VIDEO_PROCESSED_MEDIA_PATH=/path/to/processed/videos

VIDEO_CORS_ORIGINS=http://localhost:5100,http://localhost:5000
VIDEO_TRUST_PROXY=false



# =============================================================================
# REVERSE PROXY (TRAEFIK)
# =============================================================================
TRAEFIK_ACME_EMAIL=patrick@korczewski.de
TRAEFIK_DASHBOARD_USER=admin
TRAEFIK_DASHBOARD_PASSWORD_HASH=$apr1$8jT7RHxC$7l4L5Ov0k5qY5Zz5w5w5w0
# TRAEFIK_ACME_CA_SERVER=https://acme-staging-v02.api.letsencrypt.org/directory

IPV64_API_KEY=your-ipv64-api-key
TZ=Europe/Berlin
