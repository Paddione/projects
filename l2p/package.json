{
  "name": "learn2play",
  "version": "1.0.0",
  "description": "Learn2Play multiplayer quiz platform",
  "type": "module",
  "scripts": {
    "backup": "docker-compose --profile production exec postgres pg_dump -U l2p_user learn2play > backup_$(date +%Y%m%d_%H%M%S).sql",
    "build:all": "cd frontend && npm run build && cd ../backend && npm run build",
    "build:backend": "cd backend && npm run build",
    "build:frontend": "cd frontend && npm run build",
    "coverage:all": "(npm run test:coverage:frontend || true) && (npm run test:coverage:backend || true) && npm run coverage:collect",
    "coverage:badge": "node shared/test-config/CoverageConfigCLI.js badge",
    "coverage:collect": "node shared/test-config/CoverageConfigCLI.js collect",
    "coverage:config": "node shared/test-config/CoverageConfigCLI.js show",
    "coverage:exclude": "node shared/test-config/CoverageConfigCLI.js add-exclusion",
    "coverage:report": "node shared/test-config/CoverageConfigCLI.js report",
    "coverage:threshold": "node shared/test-config/CoverageConfigCLI.js set-threshold",
    "coverage:validate": "node shared/test-config/CoverageConfigCLI.js validate",
    "db:health": "cd backend && npm run db:health",
    "db:migrate": "cd backend && npm run db:migrate",
    "deploy": "./scripts/deploy.sh",
    "deploy:dev": "docker-compose --profile development up -d",
    "deploy:down": "docker-compose down",
    "deploy:logs": "docker-compose logs -f",
    "deploy:prod": "docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d",
    "dev:backend": "cd backend && npm run dev",
    "dev:backend:tsx": "cd backend && npm run dev:tsx",
    "dev:frontend": "cd frontend && npm run dev",
    "dev:no-compile": "./scripts/start-no-compile.sh",
    "diagnostics:ts": "node scripts/ci/count-ts-diagnostics.js",
    "diagnostics:ts:update-baseline": "node scripts/ci/count-ts-diagnostics.js --update-baseline",
    "import:questions": "node scripts/import-questions-db.js",
    "import:questions:validate": "node scripts/import-questions.js",
    "import:questions:verify": "node scripts/verify-import.js",
    "install:all": "npm install && cd frontend && npm install && cd ../backend && npm install",
    "lint": "npm run lint:structure",
    "lint:structure": "node scripts/verify-structure.mjs",
    "logs": "docker-compose --profile production logs -f",
    "pipeline:complete": "npm run test:config:init && npm run test:config:validate && (npm run test:env:validate || true) && (npm run test:browsers:install:all || true) && npm run test:all:pipeline && npm run coverage:all",
    "rebuild": "bash ./scripts/rebuild.sh",
    "run": "node scripts/run-script.js",
    "run:backend": "node scripts/run-script.js backend",
    "run:frontend": "node scripts/run-script.js frontend",
    "run:shared": "node scripts/run-script.js shared",
    "setup": "./scripts/setup.sh",
    "show": "node scripts/show-test-pipeline.js",
    "smtp:apply": "npx ts-node scripts/fix-smtp.js --apply",
    "smtp:fix": "npx ts-node scripts/fix-smtp.js",
    "smtp:test": "npx ts-node scripts/fix-smtp.js --test-new",
    "start:test-env": "concurrently -k -s first -n backend,frontend -c blue,green \"npm --prefix backend run dev\" \"npm --prefix frontend run start:test-env\"",
    "stop": "docker-compose --profile production down",
    "test:all": "npm run test:unit && npm run test:integration && npm run test:e2e",
    "test:setup": "./scripts/test-setup.sh full",
    "test:setup:db": "./scripts/test-setup.sh db",
    "test:setup:backend": "./scripts/test-setup.sh backend",
    "test:setup:frontend": "./scripts/test-setup.sh full",
    "test:setup:status": "./scripts/test-setup.sh status",
    "test:teardown": "./scripts/test-setup.sh teardown",
    "test:teardown:clean": "./scripts/test-setup.sh clean",
    "test:all:ci": "CI=1 npm --prefix frontend run test:ci && CI=1 npm --prefix backend run test:unit:ci && CI=1 npm --prefix backend run test:integration:ci && CI=1 npm run test:e2e:guarded",
    "test:all:full": "npm run typecheck && npm run test:all",
    "test:all:pipeline": "npm run typecheck && npm run test:unit && npm run test:integration && npm run test:e2e:guarded",
    "test:all:pipeline:soft": "(npm run typecheck || true) && (npm run test:unit || true) && (npm run test:integration || true) && (npm run test:e2e:guarded || true)",
    "test:browsers:install": "cd frontend && npx --yes playwright install --with-deps",
    "test:browsers:install:all": "cd frontend && npx --yes playwright install --with-deps && cd e2e && npx --yes playwright install --with-deps",
    "test:config:health": "node scripts/test-config.js health-check",
    "test:config:help": "node scripts/test-config.js help",
    "test:config:init": "node scripts/test-config.js init-env",
    "test:config:show": "node scripts/test-config.js show-config",
    "test:config:validate": "node scripts/test-config.js validate",
    "test:coverage": "npm run test:coverage:frontend && npm run test:coverage:backend && npm run coverage:report",
    "test:coverage:backend": "cd backend && npm run test:coverage",
    "test:coverage:frontend": "cd frontend && npm run test:coverage",
    "test:debug": "cd frontend && npm run test:unit",
    "test:e2e": "cd frontend && npm run test:e2e",
    "test:e2e:guarded": "node scripts/check-e2e-env.js && npm run test:e2e || (echo 'Skipping E2E: environment not ready.' && exit 0)",
    "test:e2e:headed": "cd frontend && npm run test:e2e:headed",
    "test:e2e:ui": "cd frontend && npm run test:e2e:ui",
    "test:env:cleanup": "./scripts/test-environment.sh cleanup",
    "test:env:health": "./scripts/test-environment.sh health",
    "test:env:logs": "./scripts/test-environment.sh logs",
    "test:env:reset": "./scripts/test-environment.sh reset",
    "test:env:restart": "./scripts/test-environment.sh restart",
    "test:env:start": "./scripts/test-environment.sh start",
    "test:env:status": "./scripts/test-environment.sh status",
    "test:env:stop": "./scripts/test-environment.sh stop",
    "test:env:urls": "./scripts/test-environment.sh urls",
    "test:env:validate": "./scripts/validate-test-environment.sh",
    "test:fix": "echo 'Test fixes moved to individual directories'",
    "test:integration": "npm run test:integration:frontend && npm run test:integration:backend",
    "test:integration:backend": "cd backend && npm run test:integration",
    "test:integration:frontend": "cd frontend && npm run test:integration",
    "test:interactive": "./scripts/test-runner.sh",
    "test:quick": "cd frontend && npm run test:unit",
    "test:smtp": "node scripts/test-smtp.js",
    "test:smtp:integration": "cd backend && npm run test:integration -- --testPathPattern=EmailService.integration.test.ts",
    "test:smtp:real": "node scripts/test-smtp.js --real",
    "test:unit": "npm run test:unit:frontend && npm run test:unit:backend",
    "test:unit:backend": "cd backend && npm run test:unit",
    "test:unit:frontend": "cd frontend && npm run test:unit",
    "test:validate": "echo 'Test validation moved to individual directories'",
    "test:watch": "npm run test:watch:unit",
    "test:watch:integration": "concurrently -k -s first -n front,back -c green,blue \"npm --prefix frontend run test:integration -- --watch\" \"npm --prefix backend run test:integration -- --watch\"",
    "test:watch:unit": "concurrently -k -s first -n front,back -c green,blue \"npm --prefix frontend run test:watch\" \"npm --prefix backend run test:watch\"",
    "typecheck": "npm --prefix frontend run typecheck && npm --prefix backend run typecheck",
    "typecheck:strict": "npm --prefix frontend run typecheck:strict && npm --prefix backend run typecheck:strict",
    "validate:no-compile": "./scripts/validate-no-compile.sh",
    "check:deprecated": "node -e \"const fs=require('fs'); const path='package-lock.json'; if(!fs.existsSync(path)){console.log('No package-lock.json found.'); process.exit(0);} const lock=JSON.parse(fs.readFileSync(path,'utf8')); const deprecated=Object.entries(lock.packages||{}).filter(([,info])=>info.deprecated); if(!deprecated.length){console.log('No deprecated packages.'); process.exit(0);} deprecated.forEach(([name,info])=>{const pkg=name.replace(/^node_modules\\//,''); console.log(pkg + ': ' + info.deprecated);}); process.exit(1);\""
  },
  "devDependencies": {
    "@types/js-yaml": "^4.0.9",
    "concurrently": "^8.2.2",
    "js-yaml": "^4.1.0"
  },
  "workspaces": [
    "frontend",
    "backend"
  ],
  "overrides": {
    "@opentelemetry/exporter-trace-otlp-proto": "0.209.0",
    "@opentelemetry/exporter-metrics-otlp-proto": "0.209.0",
    "babel-plugin-istanbul": {
      "test-exclude": "7.0.1"
    },
    "glob": "10.5.0",
    "module-lookup-amd": {
      "glob": "10.5.0"
    }
  },
  "bin": {
    "run-script": "./scripts/run-script.js"
  }
}
