# Learn2Play - PRODUCTION Configuration
# Copy this to .env-prod and fill in the values
# DO NOT COMMIT .env-prod TO GIT

# ====================================================
# DATABASE CONFIGURATION (uses centralized PostgreSQL)
# ====================================================
# These should match your shared-infrastructure/.env settings
DATABASE_URL=postgresql://l2p_user:YOUR_DB_PASSWORD_HERE@shared-postgres:5432/l2p_db
DB_HOST=shared-postgres
DB_PORT=5432
DB_NAME=l2p_db
DB_USER=l2p_user
DB_PASSWORD=YOUR_DB_PASSWORD_HERE
L2P_DB_USER=l2p_user
L2P_DB_PASSWORD=YOUR_DB_PASSWORD_HERE

# ====================================================
# JWT AUTHENTICATION (Production - KEEP SECURE!)
# ====================================================
# Generate with: openssl rand -hex 32
JWT_SECRET=YOUR_JWT_SECRET_HERE
JWT_REFRESH_SECRET=YOUR_JWT_REFRESH_SECRET_HERE

# ====================================================
# EMAIL CONFIGURATION
# ====================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=YOUR_EMAIL@gmail.com
SMTP_PASS=YOUR_GMAIL_APP_PASSWORD_HERE
SMTP_FROM=YOUR_EMAIL@gmail.com

# ====================================================
# CENTRALIZED AUTH SERVICE
# ====================================================
AUTH_SERVICE_URL=https://auth.korczewski.de
OAUTH_CLIENT_ID=your-oauth-client-id
OAUTH_CLIENT_SECRET=your-oauth-client-secret
OAUTH_REDIRECT_URI=https://l2p.korczewski.de/auth/callback



# ====================================================
# APPLICATION CONFIGURATION (Production)
# ====================================================
NODE_ENV=production
PORT=3001
FRONTEND_PORT=80

# CORS Configuration
FRONTEND_URL=https://l2p.korczewski.de
CORS_ORIGINS=https://l2p.korczewski.de

# Cookie Domain (for centralized auth across subdomains)
COOKIE_DOMAIN=.korczewski.de

# ====================================================
# DOCKER NETWORK CONFIGURATION
# ====================================================
L2P_NETWORK_EXTERNAL=true

# ====================================================
# TESTING
# ====================================================
ALLOW_PROD_DB_IN_TESTS=false
TEST_ENVIRONMENT=production
TEST_TYPE=integration
LOG_LEVEL=warn

# ====================================================
# OPTIONAL FEATURES
# ====================================================
MAX_FILE_SIZE=10
SESSION_TIMEOUT=86400000
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ====================================================
# SECURITY SETTINGS (Production - strict)
# ====================================================
FORCE_HTTPS=true
TRUSTED_PROXIES=172.16.0.0/12,10.0.0.0/8
COOKIE_SECURE=true
COOKIE_SAME_SITE=strict
